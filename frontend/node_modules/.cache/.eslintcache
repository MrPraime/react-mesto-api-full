[{"/home/praime/react-mesto-api-full/frontend/src/index.js":"1","/home/praime/react-mesto-api-full/frontend/src/reportWebVitals.js":"2","/home/praime/react-mesto-api-full/frontend/src/components/App.js":"3","/home/praime/react-mesto-api-full/frontend/src/components/Header.js":"4","/home/praime/react-mesto-api-full/frontend/src/components/Main.js":"5","/home/praime/react-mesto-api-full/frontend/src/components/ImagePopup.js":"6","/home/praime/react-mesto-api-full/frontend/src/components/Footer.js":"7","/home/praime/react-mesto-api-full/frontend/src/components/AddPlacePopup.js":"8","/home/praime/react-mesto-api-full/frontend/src/components/EditProfilePopup.js":"9","/home/praime/react-mesto-api-full/frontend/src/components/InfoTooltip.js":"10","/home/praime/react-mesto-api-full/frontend/src/components/EditAvatarPopup.js":"11","/home/praime/react-mesto-api-full/frontend/src/components/Login.js":"12","/home/praime/react-mesto-api-full/frontend/src/components/Register.js":"13","/home/praime/react-mesto-api-full/frontend/src/contexts/CurrentUserContext.js":"14","/home/praime/react-mesto-api-full/frontend/src/utils/Api.js":"15","/home/praime/react-mesto-api-full/frontend/src/utils/MestoAuth.js":"16","/home/praime/react-mesto-api-full/frontend/src/components/ProtectedRoute.js":"17","/home/praime/react-mesto-api-full/frontend/src/components/PopupWithForm.js":"18","/home/praime/react-mesto-api-full/frontend/src/components/Card.js":"19","/home/praime/react-mesto-api-full/frontend/src/components/PageWithLogin.js":"20"},{"size":398,"mtime":1647449219239,"results":"21","hashOfConfig":"22"},{"size":362,"mtime":1647449219239,"results":"23","hashOfConfig":"22"},{"size":8255,"mtime":1647698840783,"results":"24","hashOfConfig":"22"},{"size":912,"mtime":1647449219235,"results":"25","hashOfConfig":"22"},{"size":1634,"mtime":1647449219235,"results":"26","hashOfConfig":"22"},{"size":615,"mtime":1647449219235,"results":"27","hashOfConfig":"22"},{"size":184,"mtime":1647449219235,"results":"28","hashOfConfig":"22"},{"size":1477,"mtime":1647449219235,"results":"29","hashOfConfig":"22"},{"size":1890,"mtime":1647449219235,"results":"30","hashOfConfig":"22"},{"size":874,"mtime":1647449219235,"results":"31","hashOfConfig":"22"},{"size":1071,"mtime":1647449219235,"results":"32","hashOfConfig":"22"},{"size":402,"mtime":1647449219235,"results":"33","hashOfConfig":"22"},{"size":401,"mtime":1647449219235,"results":"34","hashOfConfig":"22"},{"size":113,"mtime":1647449219239,"results":"35","hashOfConfig":"22"},{"size":2576,"mtime":1647700207418,"results":"36","hashOfConfig":"22"},{"size":1410,"mtime":1647695569111,"results":"37","hashOfConfig":"22"},{"size":275,"mtime":1647449219235,"results":"38","hashOfConfig":"22"},{"size":849,"mtime":1647449219235,"results":"39","hashOfConfig":"22"},{"size":1673,"mtime":1647449219235,"results":"40","hashOfConfig":"22"},{"size":2196,"mtime":1647449219235,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"a0vev5",{"filePath":"44","messages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"46","messages":"47","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"48"},{"filePath":"49","messages":"50","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"51","messages":"52","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"53"},{"filePath":"54","messages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"60","messages":"61","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"62","messages":"63","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"64","messages":"65","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"68"},{"filePath":"69","messages":"70","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"71"},{"filePath":"72","messages":"73","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"74","messages":"75","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"76","messages":"77","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"78","messages":"79","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"80","messages":"81","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"82","messages":"83","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"84","messages":"85","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/praime/react-mesto-api-full/frontend/src/index.js",[],"/home/praime/react-mesto-api-full/frontend/src/reportWebVitals.js",[],"/home/praime/react-mesto-api-full/frontend/src/components/App.js",["86","87"],"import React, { useState, useEffect } from \"react\";\nimport { Route, Routes, useNavigate } from \"react-router-dom\";\nimport Footer from \"./Footer.js\";\nimport Main from \"./Main.js\";\nimport Header from \"./Header.js\";\n// import PopupWithForm from \"./PopupWithForm.js\";\nimport ImagePopup from \"./ImagePopup.js\";\nimport { api } from \"../utils/Api.js\";\nimport EditProfilePopup from \"./EditProfilePopup.js\";\nimport EditAvatarPopup from \"./EditAvatarPopup.js\";\nimport AddPlacePopup from \"./AddPlacePopup.js\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport CurrentUserContext from \"../contexts/CurrentUserContext.js\";\nimport InfoToolTip from \"./InfoTooltip.js\";\nimport auth from \"../utils/MestoAuth.js\";\nimport Register from \"./Register.js\";\nimport Login from \"./Login.js\";\n\nfunction App() {\n  const [selectedCard, setSelectedCard] = useState({});\n  const [cards, setCards] = useState([]);\n  const [currentUser, setCurrentUser] = useState({});\n  const [userEmail, setUserEmail] = React.useState(\"\");\n  const navigate = useNavigate();\n  const [linkName, setLinkName] = React.useState(\"\");\n  const [linkRoute, setLinkRoute] = React.useState(\"\");\n  const [isRegistrationSuccsses, setIsRegistrationSuccsses] = React.useState(false);\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isRegistationResultPopupOpen, setIsRegistationResultPopupOpen] = React.useState(false);\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  const jwt = localStorage.getItem('jwt'); \n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n  };\n\n\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsRegistationResultPopupOpen(false);\n    setSelectedCard({});\n  }\n\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n\n    api\n      .changeLikeCardStatus(card._id, !isLiked, jwt)\n      .then((newCard) => {\n        setCards((state) =>\n          state.map((c) => (c._id === card._id ? newCard : c))\n        );\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n  function handleDeleteClick(card) {\n    api\n      .deleteCard(card._id, jwt)\n      .then(() => {\n        setCards(cards.filter((i) => i._id !== card._id));\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n  const handleUpdateUser = ({ name, about }) => {\n    setIsLoading(true);\n    api\n      .patchUserInfo(name, about, jwt)\n      .then((newUser) => {\n        setCurrentUser(newUser);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.error(err);\n      })\n      .finally(() => {\n        setIsLoading(false);\n      });\n  };\n\n  const handleUpdateAvatar = (data) => {\n    setIsLoading(true);\n    api\n      .patchNewAvatar(data, jwt)\n      .then((newUser) => {\n        setCurrentUser(newUser);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.error(err);\n      })\n      .finally(() => {\n        setIsLoading(false);\n      });\n  };\n\n\n  const handleAddPlaceSubmit = ({ name, link }) => {\n    setIsLoading(true);\n    api.postNewCard(name, link, jwt)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.error(err);\n      })\n      .finally(() => {\n        setIsLoading(false);\n      });\n  };\n\n\n\n  function swapHeaderLinks(name, route) {\n    setLinkName(name);\n    setLinkRoute(route);\n  }\n\n  function handleSetUserEmail(email) {\n    setUserEmail(email);\n  }\n\n  /** Проверяет наличие токена */\n  function checkToken() {\n const jwt = localStorage.getItem(\"jwt\");\n    if (jwt) {\n      auth\n        .checkToken(jwt)\n        .then((data) => {\n          setLoggedIn(true);\n          handleSetUserEmail(data.data.email);\n          navigate(\"/\");\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n    }\n  }\n\n  React.useEffect(() => {\n    checkToken();\n  }, []);\n\n  function handleSignOutClick() {\n    navigate(\"/sign-in\");\n    localStorage.removeItem(\"jwt\");\n    setLoggedIn(false);\n  }\n\n  function handleRegistration(isSuccsses) {\n    setIsRegistrationSuccsses(isSuccsses);\n    setIsRegistationResultPopupOpen(true);\n  }\n\n  /** регистрация пользователя */\n  function handleUserRegister(password, email) {\n    auth\n      .register(password, email)\n      .then((data) => {\n        navigate(\"/sign-in\");\n        handleRegistration(true);\n      })\n      .catch((err) => {\n        console.error(err);\n        handleRegistration(false);\n      });\n  }\n\n  /** авторизация пользователя */\n  function handleUserAuthorization(password, email) {\n    auth\n      .authorization(password, email)\n      .then((data) => {\n        setLoggedIn(true);\n        setUserEmail(email);\n        navigate(\"/\");\n        localStorage.setItem(\"jwt\", data.token);\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n\nReact.useEffect(() => { \nif(loggedIn) {\n   api\n     .getInitialCards(jwt)\n     .then((cardsList) => {\n       setCards(cardsList);\n     })\n     .catch((err) => {\n       console.error(err);\n     });\n   }\n }, [loggedIn, jwt]);\n\nReact.useEffect(() => {\n    if(loggedIn) {\n   api\n     .getUserInfo(jwt)\n     .then((data) => {\n       setCurrentUser(data);\n     })\n     .catch((err) => {\n       console.error(err);\n     });\n  }\n }, [loggedIn, jwt]);\n\n\n  return (\n    <div className=\"page\">\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header\n          linkName={linkName}\n          linkRoute={linkRoute}\n          signOut={handleSignOutClick}\n          isLoggedIn={loggedIn}\n          userEmail={userEmail}\n        />\n        <Routes>\n          <Route\n            path=\"/sign-up\"\n            element={<Register onPage={swapHeaderLinks} onSubmit={handleUserRegister} />}\n          />\n          <Route\n            path=\"/sign-in\"\n            element={\n              <Login\n                onPage={swapHeaderLinks}\n                onSubmit={handleUserAuthorization}\n                setUserEmail={setUserEmail}\n              />\n            }\n          />\n          <Route\n            path=\"/\"\n            element={\n              <ProtectedRoute\n                loggedIn={loggedIn}\n                component={Main}\n                onEditProfile={handleEditProfileClick}\n                onAddPlace={handleAddPlaceClick}\n                onEditAvatar={handleEditAvatarClick}\n                onCardClick={handleCardClick} \n                cards={cards}\n                onCardLike={handleCardLike}\n                onCardDelete={handleDeleteClick}\n                onPage={swapHeaderLinks}\n                isLoading={isLoading}\n              />\n            }\n          />\n        </Routes>\n        <Footer />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onUpdateUser={handleUpdateUser}\n          onClose={closeAllPopups}\n          isLoading={isLoading}\n        />\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onAddPlace={handleAddPlaceSubmit}\n          onClose={closeAllPopups}\n          isLoading={isLoading}\n        />\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n          isLoading={isLoading}\n        />\n   \n        <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n\n        <InfoToolTip\n          isOpen={isRegistationResultPopupOpen}\n          name=\"info-tool-tip\"\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleRegistration}\n          isRegistrationSuccsses={isRegistrationSuccsses}\n        />\n      </CurrentUserContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","/home/praime/react-mesto-api-full/frontend/src/components/Header.js",[],"/home/praime/react-mesto-api-full/frontend/src/components/Main.js",["88"],"import React, {useContext} from 'react';\nimport Card from './Card.js';\nimport CurrentUserContext from '../contexts/CurrentUserContext.js';\n\nfunction Main(props) {\n\n\n  const currentUser = useContext(CurrentUserContext);\n  React.useEffect(() => {\n    props.onPage(\"Выйти\", \"/sign-in\");\n  }, []);\n\n  return (\n    <main className=\"main\">\n      <section className=\"profile\">\n        <button\n          className=\"profile__edit-button-avatar\"\n          type=\"button\"\n          onClick={props.onEditAvatar}\n        >\n          <img\n            src={currentUser.avatar}\n            alt=\"Фото аватара\"\n            className=\"profile__avatar\"\n          />\n        </button>\n        <div className=\"profile__info\">\n          <h1 className=\"profile__title\">{currentUser.name}</h1>\n          <button\n            className=\"profile__edit-button\"\n            type=\"button\"\n            onClick={props.onEditProfile}\n          ></button>\n          <p className=\"profile__subtitle\">{currentUser.about}</p>\n        </div>\n        <button\n          className=\"profile__add-button\"\n          type=\"button\"\n          onClick={props.onAddPlace}\n        ></button>\n      </section>\n\n\n\t  <section className=\"elements\">   { props.cards.map(item => (\n                    <Card\n                        onCardDelete = {props.onCardDelete}\n                        onCardLike = {props.onCardLike} \n                        onCardClick={props.onCardClick}\n                        key={item._id} \n                        card={item}\n                    />\n                ))\n                }\n\t  </section>\n    \n    </main>\n  );\n}\n\nexport default Main;\n","/home/praime/react-mesto-api-full/frontend/src/components/ImagePopup.js",[],"/home/praime/react-mesto-api-full/frontend/src/components/Footer.js",[],"/home/praime/react-mesto-api-full/frontend/src/components/AddPlacePopup.js",[],"/home/praime/react-mesto-api-full/frontend/src/components/EditProfilePopup.js",[],"/home/praime/react-mesto-api-full/frontend/src/components/InfoTooltip.js",[],"/home/praime/react-mesto-api-full/frontend/src/components/EditAvatarPopup.js",[],"/home/praime/react-mesto-api-full/frontend/src/components/Login.js",["89"],"import React from \"react\";\n\nimport PageWithLogin from \"./PageWithLogin\";\n\nfunction Login(props) {\n  \n    React.useEffect(() => {\n        props.onPage(\"Регистрация\", \"/sign-up\");\n      }, []);\n\n        return ( \n            <PageWithLogin\n            title=\"Вход\"\n            textButton=\"Войти\"\n            onSubmit={props.onSubmit}\n            />\n\n        )\n}\n\nexport default Login;","/home/praime/react-mesto-api-full/frontend/src/components/Register.js",["90"],"import React from \"react\";\nimport PageWithLogin from \"./PageWithLogin\";\n\n\n\nfunction Register(props) {\n\n  React.useEffect(() => {\n    props.onPage(\"Войти\", \"/sign-in\");\n  }, []);\n\n    return ( \n        <PageWithLogin\n          title=\"Регистрация\"\n          textButton=\"Зарегистрироваться\"\n          onSubmit={props.onSubmit}\n      />\n\n    )\n}\n\nexport default Register;","/home/praime/react-mesto-api-full/frontend/src/contexts/CurrentUserContext.js",[],"/home/praime/react-mesto-api-full/frontend/src/utils/Api.js",[],"/home/praime/react-mesto-api-full/frontend/src/utils/MestoAuth.js",[],"/home/praime/react-mesto-api-full/frontend/src/components/ProtectedRoute.js",[],"/home/praime/react-mesto-api-full/frontend/src/components/PopupWithForm.js",[],"/home/praime/react-mesto-api-full/frontend/src/components/Card.js",[],"/home/praime/react-mesto-api-full/frontend/src/components/PageWithLogin.js",[],{"ruleId":"91","severity":1,"message":"92","line":1,"column":27,"nodeType":"93","messageId":"94","endLine":1,"endColumn":36},{"ruleId":"95","severity":1,"message":"96","line":168,"column":6,"nodeType":"97","endLine":168,"endColumn":8,"suggestions":"98"},{"ruleId":"95","severity":1,"message":"99","line":11,"column":6,"nodeType":"97","endLine":11,"endColumn":8,"suggestions":"100"},{"ruleId":"95","severity":1,"message":"99","line":9,"column":10,"nodeType":"97","endLine":9,"endColumn":12,"suggestions":"101"},{"ruleId":"95","severity":1,"message":"99","line":10,"column":6,"nodeType":"97","endLine":10,"endColumn":8,"suggestions":"102"},"no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook React.useEffect has a missing dependency: 'checkToken'. Either include it or remove the dependency array.","ArrayExpression",["103"],"React Hook React.useEffect has a missing dependency: 'props'. Either include it or remove the dependency array. However, 'props' will change when *any* prop changes, so the preferred fix is to destructure the 'props' object outside of the useEffect call and refer to those specific props inside React.useEffect.",["104"],["105"],["106"],{"desc":"107","fix":"108"},{"desc":"109","fix":"110"},{"desc":"109","fix":"111"},{"desc":"109","fix":"112"},"Update the dependencies array to be: [checkToken]",{"range":"113","text":"114"},"Update the dependencies array to be: [props]",{"range":"115","text":"116"},{"range":"117","text":"116"},{"range":"118","text":"116"},[4461,4463],"[checkToken]",[289,291],"[props]",[187,189],[173,175]]