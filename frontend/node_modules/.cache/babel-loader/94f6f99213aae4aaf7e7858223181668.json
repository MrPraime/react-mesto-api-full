{"ast":null,"code":"import _classCallCheck from\"/home/praime/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/praime/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";export var Api=/*#__PURE__*/function(){function Api(_ref){var url=_ref.url,headers=_ref.headers;_classCallCheck(this,Api);this._url=url;this._headers=headers;}_createClass(Api,[{key:\"_checkResponse\",value:function _checkResponse(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \".concat(res.status));}},{key:\"getUserInfo\",value:function getUserInfo(token){return fetch(\"\".concat(this._url,\"/users/me\"),{method:'GET',headers:{Authorization:\"Bearer \".concat(jwt),'Content-Type':'application/json'}}).then(this._checkResponse);}},{key:\"patchUserInfo\",value:function patchUserInfo(name,about){// loading(true); \nreturn fetch(\"\".concat(this._url,\"/users/me\"),{method:\"PATCH\",headers:this._headers,\"Content-Type\":\"application/json\",body:JSON.stringify({name:name,about:about})}).then(this._checkResponse);}},{key:\"getInitialCards\",value:function getInitialCards(){return fetch(\"\".concat(this._url,\"/cards \"),{headers:this._headers}).then(this._checkResponse);}},{key:\"postNewCard\",value:function postNewCard(name,link){return fetch(\"\".concat(this._url,\"/cards \"),{method:\"POST\",headers:this._headers,body:JSON.stringify({name:name,link:link})}).then(this._checkResponse);}},{key:\"deleteCard\",value:function deleteCard(id){return fetch(\"\".concat(this._url,\"/cards/\").concat(id),{method:\"DELETE\",headers:this._headers}).then(this._checkResponse);}},{key:\"patchNewAvatar\",value:function patchNewAvatar(avatarUrl){return fetch(\"\".concat(this._url,\"/users/me/avatar\"),{method:\"PATCH\",headers:this._headers,body:JSON.stringify({avatar:avatarUrl})}).then(this._checkResponse);}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardId,status){return status?this._setLike(cardId):this._removeLike(cardId);}},{key:\"_setLike\",value:function _setLike(id){return fetch(\"\".concat(this._url,\"/cards/likes/\").concat(id),{method:\"PUT\",headers:this._headers}).then(this._checkResponse);}},{key:\"_removeLike\",value:function _removeLike(id){return fetch(\"\".concat(this._url,\"/cards/likes/\").concat(id),{method:\"DELETE\",headers:this._headers}).then(this._checkResponse);}}]);return Api;}();export var api=new Api({url:\"https://api.praime.nomoredomains.work\"});// export default api;","map":{"version":3,"sources":["/home/praime/react-mesto-api-full/frontend/src/utils/Api.js"],"names":["Api","url","headers","_url","_headers","res","ok","json","Promise","reject","status","token","fetch","method","Authorization","jwt","then","_checkResponse","name","about","body","JSON","stringify","link","id","avatarUrl","avatar","cardId","_setLike","_removeLike","api"],"mappings":"wPAAA,UAAaA,CAAAA,GAAb,yBACE,kBAA8B,IAAhBC,CAAAA,GAAgB,MAAhBA,GAAgB,CAAXC,OAAW,MAAXA,OAAW,2BAC5B,KAAKC,IAAL,CAAYF,GAAZ,CACA,KAAKG,QAAL,CAAgBF,OAAhB,CACD,CAJH,8CAME,wBAAeG,GAAf,CAAoB,CAClB,GAAIA,GAAG,CAACC,EAAR,CAAY,CACV,MAAOD,CAAAA,GAAG,CAACE,IAAJ,EAAP,CACH,CACD,MAAOC,CAAAA,OAAO,CAACC,MAAR,gDAAyBJ,GAAG,CAACK,MAA7B,EAAP,CACD,CAXD,2BAaE,qBAAYC,KAAZ,CAAmB,CACjB,MAAOC,CAAAA,KAAK,WAAI,KAAKT,IAAT,cAA0B,CACpCU,MAAM,CAAE,KAD4B,CAEpCX,OAAO,CAAE,CACPY,aAAa,kBAAYC,GAAZ,CADN,CAEP,eAAgB,kBAFT,CAF2B,CAA1B,CAAL,CAONC,IAPM,CAOD,KAAKC,cAPJ,CAAP,CASD,CAvBH,6BAyBE,uBAAcC,IAAd,CAAoBC,KAApB,CAA2B,CACzB;AACA,MAAOP,CAAAA,KAAK,WAAI,KAAKT,IAAT,cAA0B,CACpCU,MAAM,CAAE,OAD4B,CAEpCX,OAAO,CAAE,KAAKE,QAFsB,CAGpC,eAAgB,kBAHoB,CAKpCgB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBJ,IAAI,CAAEA,IADa,CAEnBC,KAAK,CAAEA,KAFY,CAAf,CAL8B,CAA1B,CAAL,CAUNH,IAVM,CAUD,KAAKC,cAVJ,CAAP,CAWD,CAtCH,+BA0CE,0BAAkB,CAChB,MAAOL,CAAAA,KAAK,WAAI,KAAKT,IAAT,YAAwB,CAClCD,OAAO,CAAE,KAAKE,QADoB,CAAxB,CAAL,CAGNY,IAHM,CAGD,KAAKC,cAHJ,CAAP,CAKD,CAhDH,2BAkDE,qBAAYC,IAAZ,CAAkBK,IAAlB,CAAwB,CACtB,MAAOX,CAAAA,KAAK,WAAI,KAAKT,IAAT,YAAwB,CAClCU,MAAM,CAAE,MAD0B,CAElCX,OAAO,CAAE,KAAKE,QAFoB,CAIlCgB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBJ,IAAI,CAAEA,IADa,CAEnBK,IAAI,CAAEA,IAFa,CAAf,CAJ4B,CAAxB,CAAL,CASNP,IATM,CASD,KAAKC,cATJ,CAAP,CAWD,CA9DH,0BAgEE,oBAAWO,EAAX,CAAe,CACb,MAAOZ,CAAAA,KAAK,WAAI,KAAKT,IAAT,mBAAuBqB,EAAvB,EAA6B,CACvCX,MAAM,CAAE,QAD+B,CAEvCX,OAAO,CAAE,KAAKE,QAFyB,CAA7B,CAAL,CAINY,IAJM,CAID,KAAKC,cAJJ,CAAP,CAMD,CAvEH,8BAyEE,wBAAeQ,SAAf,CAA0B,CACxB,MAAOb,CAAAA,KAAK,WAAI,KAAKT,IAAT,qBAAiC,CAC3CU,MAAM,CAAE,OADmC,CAE3CX,OAAO,CAAE,KAAKE,QAF6B,CAI3CgB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBI,MAAM,CAAED,SADW,CAAf,CAJqC,CAAjC,CAAL,CAQNT,IARM,CAQD,KAAKC,cARJ,CAAP,CASD,CAnFH,oCAsFE,8BAAqBU,MAArB,CAA6BjB,MAA7B,CAAqC,CACnC,MAAOA,CAAAA,MAAM,CAAG,KAAKkB,QAAL,CAAcD,MAAd,CAAH,CAA2B,KAAKE,WAAL,CAAiBF,MAAjB,CAAxC,CACH,CAxFD,wBA0FA,kBAASH,EAAT,CAAa,CACX,MAAOZ,CAAAA,KAAK,WAAI,KAAKT,IAAT,yBAA6BqB,EAA7B,EAAmC,CAC3CX,MAAM,CAAE,KADmC,CAE3CX,OAAO,CAAE,KAAKE,QAF6B,CAAnC,CAAL,CAGNY,IAHM,CAGD,KAAKC,cAHJ,CAAP,CAID,CA/FD,2BAiGA,qBAAYO,EAAZ,CAAgB,CACd,MAAOZ,CAAAA,KAAK,WAAI,KAAKT,IAAT,yBAA6BqB,EAA7B,EAAmC,CAC3CX,MAAM,CAAE,QADmC,CAE3CX,OAAO,CAAE,KAAKE,QAF6B,CAAnC,CAAL,CAINY,IAJM,CAID,KAAKC,cAJJ,CAAP,CAKD,CAvGD,mBA4GA,MAAQ,IAAMa,CAAAA,GAAG,CAAG,GAAI9B,CAAAA,GAAJ,CAAQ,CAC1BC,GAAG,CAAE,uCADqB,CAAR,CAAZ,CAIR","sourcesContent":["export class Api {\n  constructor({ url, headers }) {\n    this._url = url;\n    this._headers = headers;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n  }\n  return Promise.reject(`Ошибка ${res.status}`);\n} \n\n  getUserInfo(token) {\n    return fetch(`${this._url}/users/me`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${jwt}`,\n        'Content-Type': 'application/json'\n      }\n    })\n    .then(this._checkResponse)\n     \n  }\n\n  patchUserInfo(name, about) {\n    // loading(true); \n    return fetch(`${this._url}/users/me`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      \"Content-Type\": \"application/json\",\n\n      body: JSON.stringify({\n        name: name,\n        about: about,\n      }),\n    })\n    .then(this._checkResponse)  \n  }\n\n  \n\n  getInitialCards() {\n    return fetch(`${this._url}/cards `, {\n      headers: this._headers,\n    })\n    .then(this._checkResponse)\n\n  }\n\n  postNewCard(name, link) {\n    return fetch(`${this._url}/cards `, {\n      method: \"POST\",\n      headers: this._headers,\n\n      body: JSON.stringify({\n        name: name,\n        link: link,\n      }),\n    })\n    .then(this._checkResponse)\n\n  }\n\n  deleteCard(id) {\n    return fetch(`${this._url}/cards/${id}`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    })\n    .then(this._checkResponse)\n     \n  }\n\n  patchNewAvatar(avatarUrl) {\n    return fetch(`${this._url}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this._headers,\n\n      body: JSON.stringify({\n        avatar: avatarUrl,\n      }),\n    })\n    .then(this._checkResponse)     \n  }\n\n\n  changeLikeCardStatus(cardId, status) {\n    return status ? this._setLike(cardId) : this._removeLike(cardId);\n}\n\n_setLike(id) {\n  return fetch(`${this._url}/cards/likes/${id}`, {\n      method: \"PUT\",\n      headers: this._headers})\n  .then(this._checkResponse);\n}\n\n_removeLike(id) {\n  return fetch(`${this._url}/cards/likes/${id}`, {\n      method: \"DELETE\",\n      headers: this._headers,\n  })\n  .then(this._checkResponse);\n}\n\n\n}\n\nexport  const api = new Api({\n  url: \"https://api.praime.nomoredomains.work\",\n});\n\n// export default api;\n"]},"metadata":{},"sourceType":"module"}